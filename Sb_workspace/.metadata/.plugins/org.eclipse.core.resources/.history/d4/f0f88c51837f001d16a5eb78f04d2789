tar&&"**"===e)return i;if(""===e)return"";var n,s="",c=!!r.nocase,u=!1,l=[],p=[],d=!1,f=-1,g=-1,m="."===e.charAt(0)?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",y=this;function b(){if(n){switch(n){case"*":s+="[^/]*?",c=!0;break;case"?":s+="[^/]",c=!0;break;default:s+="\\"+n}y.debug("clearStateChar %j %j",n,s),n=!1}}for(var v,w=0,_=e.length;w<_&&(v=e.charAt(w));w++)if(this.debug("%s\t%s %s %j",e,w,s,v),u&&a[v])s+="\\"+v,u=!1;else switch(v){case"/":return!1;case"\\":b(),u=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",e,w,s,v),d){this.debug("  in class"),"!"===v&&w===g+1&&(v="^"),s+=v;continue}y.debug("call clearStateChar %j",n),b(),n=v,r.noext&&b();continue;case"(":if(d){s+="(";continue}if(!n){s+="\\(";continue}l.push({type:n,start:w-1,reStart:s.length,open:o[n].open,close:o[n].close}),s+="!"===n?"(?:(?!(?:":"(?:",this.debug("plType %j %j",n,s),n=!1;continue;case")":if(d||!l.length){s+="\\)";co